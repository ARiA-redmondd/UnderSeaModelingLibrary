<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
  <head>
    <title>Under Sea Modeling Library (USML)</title>
  </head>
  <body>
    <h1>Under Sea Modeling Library (USML) Release Notes</h1>

    <h2>Release pending</h2>
    <h3>Overview</h3>
        <ul>
        <li>Fix problems found during florida_straits study.</li>
        <li>Add ascii_profile and ascii_arc_bathy models.</li>
        <li>reflect_loss_rayleigh: Fix calculation of complex sound speed.</li>
        <li>boundary_grid: Fix error in calculation of radial component of the slope.</li>
        <li>reflection_model: Fix problems that occur when incident ray is nearly parallel to bottom.</li>
        </ul>
    
    <h3>Specific changes</h3>
        <ul>
        <li>CMakeLists.txt</li>
          <ul>
          <li>Add florida_straits study</li>
          <li>Define USML_DEBUG if CMAKE_BUILD_TYPE is Debug </li>
          <li>Use CMAKE_BUILD_TYPE to control use of -g and -ffast_math options</li>
          <li>Rework data directories by defining USML_DATA_DIR, USML_TEST_DIR, USML_STUDIES_DIR.</li>
          </ul>
        <li>ocean/boundary_grid.h</li>
          <ul>
          <li>Clip the radial component of the slope to zero if the sum of the 
              squares of the theta and phi components are greater than 1. </li>
          </ul>
        <li>ocean/ocean.h</li>
          <ul>
          <li>Add ascii_profile and ascii_arc_bathy models</li>
          </ul>
        <li>ocean/reflect_loss_rayleigh.cc</li>
          <ul>
          <li>Add missing factor of TWO_PI to the complex sound speed calculation.
          <li>Add the ATT_CONVERT to define 1.0 / (20.0*M_LOG10E*TWO_PI) term.</li>
          </ul>
        <li>waveq3d/reflection_model.cc</li> 
          <ul>
          <li>Add bottom penetration depth as an input parameter</li>
          <li>Compute the smallest "dot_full" that could have led to this penetration </li>
          <li>Recompute bottom height and normal at the precise point of impact</li>
          <li>Eliminate conditions for bottom_reflection() near-miss</li>
          <li>Rename many of the variables to make their use clearer</li>
          </ul>
        <li>waveq3d/wave_queue.cc</li> 
          <ul>
          <li>Compute the depth that ray has penetrated into the bottom.</li>
          </ul>
        </ul>
    
    <h2>Release 0.02</h2>
    <ul>
    <li>Convert to CMake build system to support multiple operating systems.</li>
        <ul>
        <li>Port the library to Windows using Visual C++ 2010 Express.</li>
        <li>Eliminate the need for USML_ROOT environment variable.</li>
        <li>Define symbols for test data files in CMakeLists file.</li>
        <li>Quitely fail some tests w/o errors if current platform does not 
            include the ncks utility.</li>
        </ul>
    <li>Fix vector/matrix operations with scalars.</li>
        <ul>
        <li>Requires upgrade of Boost library to version 1.48.0 or better.</li>
        <li>Use enable_if<> template like 1.48.0 version of ublas.</li>
        <li>Before this fix, scalar addition with vector/matrix just resulted
            in the original vector/matrix on Windows.<li>
        <li>This fix fixed the errors in dot_test and distance_test.</li>
        </ul>
    <li>Use operator*() and operator/() as aliases for element_prod() and element_div().</li>
        <ul>
        <li>Requires a bug fix in ublas itself.</li>
        <li>file: boost/numeric/ublas/vector_expression.hpp lines 1409 through 1417
            Should be using the enable_if<> macros just like the operator*()
            in lines 1397 through 1407 (just above it).  Doing so allows further
            overloading of operator/() for other types.</li>
        </ul>
    <li>Fixed a bug in wave_front::find_edges().  First loop on line 201 said max_az
        when it should have said max_de.</li>
    <li>Fixed memory leaks in the way that tests were using NetCDF.  Calls to 
        get_att() and values() require the user to free the memory when they are down with it.</li>
    <li>Change the name of wave_q3d to waveq3d.</li>
    <li>Move eigenray_llyods to studies directory because it runs slow.</li>
    </ul>

    <h2>Release 0.01</h2>
    <ul>
    <li>First version delivered to ONR.</li>
    </ul>


  </body>
</html>
